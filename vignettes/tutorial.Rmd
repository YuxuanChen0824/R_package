---
title: "tutorial"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{tutorial}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(package.v1)
library(car)
library(bench)
```

## Introduction

This package focus on linear regression calculation. With it, you can do model fitting, prediction, general linear hypothesis test, and residual calculations. There are four main functions in this package, which are `linear_model()`, `predict_mock()`, `GLH()`, and `residuals()`.

Here, we use the built-in toy data set, `Davis`, from package `car` to demonstrate the usages of each function.

## Toy Dataset

Load in data set `Davis`.

```{r}
data <- Davis
head(data)
```

## Fit model

Say we are interested in study students' weight adjusted for sex, height, repwt. Theoretically, our model is: $Weight = \beta_0 + \beta_1sex + \beta_2height + \beta_3repwt + \epsilon$ with $\epsilon \sim N(0,\sigma^2)$

First, we use self-defined model 'linear_model'

```{r}
mod <- linear_model(weight ~ repwt + height + sex, data = data)
```

Now, we compare it with original `lm` function

```{r}
mod2 <- lm(weight ~ repwt + height + sex, data = data)
summary(mod2)
```

## Prediction

I manually generate 5 new observations.

```{r}
newobs <- data.frame("repwt" = c(50, 70, 70, 85, 63),
                     "height" = c(165, 189, 178, 150, 180),
                     "sex" = c('F', 'M', 'M', 'F', 'F'))
```

Again, I use self-defined function first

```{r}
predict_mock(mod, newobs)
```

The results given by R function:

```{r}
predict(mod2, newobs)
```

## General Linear Hypothesis test

I will test following hypotheses

$H_0: \beta_{repwt} + 2*\beta_{weight} = 0 \space and \space \beta_{sex} = 0$

$H_1: not \space H_0$

```{r}
#Corresponding T matrix
(T = matrix(c(0,0,1,0,2,0,0,1), nrow = 2))
```

Results provided by self-defined function

```{r}
GLH(mod, T)
```

Results from `linearHypothesis` function in package `car`.

```{r}
linearHypothesis(mod2, T)
```

## Residual Calculation

```{r}

```













